<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:ChatGPTExtension"
        xmlns:vsshell="clr-namespace:Microsoft.VisualStudio.Shell;assembly=Microsoft.VisualStudio.Shell.15.0"
        xmlns:av="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        mc:Ignorable="av" 
        x:Class="ChatGPTExtension.ProxyConfigurationWindow"
        Title="Chat GPT Extension - Proxy Configuration"
        Background="{DynamicResource {x:Static vsshell:VsBrushes.WindowKey}}"
        Foreground="{DynamicResource {x:Static vsshell:VsBrushes.WindowTextKey}}"
        Height="500"
        Width="600"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize">

    <Window.Resources>
        <!-- Style for TextBox -->
        <Style TargetType="{x:Type TextBox}">
            <Setter Property="Background" Value="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowBackgroundKey}}"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowTextKey}}"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowBorderKey}}"/>
            <Setter Property="CaretBrush" Value="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowTextKey}}"/>
        </Style>

        <!-- Style for Button -->
        <Style TargetType="{x:Type Button}">
            <Setter Property="Background" Value="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowBackgroundKey}}"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowTextKey}}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowBorderKey}}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource {x:Static vsshell:VsBrushes.CommandBarHoverOverSelectedKey}}"/>
                                <Setter Property="Cursor" Value="Hand"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Style for CheckBox -->
        <Style TargetType="{x:Type CheckBox}">
            <Setter Property="Foreground" Value="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowTextKey}}"/>
            <Setter Property="Margin" Value="5"/>
        </Style>

        <!-- Style for Label -->
        <Style TargetType="{x:Type Label}">
            <Setter Property="Foreground" Value="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowTextKey}}"/>
            <Setter Property="Margin" Value="5"/>
        </Style>

        <!-- Style for PasswordBox -->
        <Style TargetType="{x:Type PasswordBox}">
            <Setter Property="Background" Value="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowBackgroundKey}}"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowTextKey}}"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowBorderKey}}"/>
            <Setter Property="CaretBrush" Value="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowTextKey}}"/>
        </Style>

    </Window.Resources>

    <Grid Background="{DynamicResource {x:Static vsshell:VsBrushes.WindowKey}}" Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Label Grid.Row="0" Content="Proxy Configuration" FontSize="16" FontWeight="Bold" HorizontalAlignment="Center"/>

        <!-- Configuration Content -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="0,10">
            <StackPanel>
                
                <!-- Use System Proxy -->
                <CheckBox x:Name="UseSystemProxyCheckBox" Content="Use system proxy settings" Checked="UseSystemProxyCheckBox_Checked" Unchecked="UseSystemProxyCheckBox_Unchecked"/>
                
                <!-- Custom Proxy Section -->
                <GroupBox Header="Custom Proxy Settings" Margin="0,10" x:Name="CustomProxyGroupBox">
                    <StackPanel>
                        
                        <!-- Enable Custom Proxy -->
                        <CheckBox x:Name="UseCustomProxyCheckBox" Content="Use custom proxy" Checked="UseCustomProxyCheckBox_Checked" Unchecked="UseCustomProxyCheckBox_Unchecked"/>
                        
                        <!-- Proxy Server and Port -->
                        <Grid Margin="0,10" x:Name="ProxyServerGrid">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="100"/>
                            </Grid.ColumnDefinitions>
                            
                            <Label Grid.Column="0" Content="Server:" VerticalAlignment="Center"/>
                            <TextBox x:Name="ProxyServerTextBox" Grid.Column="1" MinWidth="200"/>
                            <Label Grid.Column="2" Content="Port:" VerticalAlignment="Center"/>
                            <TextBox x:Name="ProxyPortTextBox" Grid.Column="3" Text="8080"/>
                        </Grid>

                        <!-- Authentication -->
                        <CheckBox x:Name="ProxyRequiresAuthCheckBox" Content="Proxy requires authentication" Checked="ProxyRequiresAuthCheckBox_Checked" Unchecked="ProxyRequiresAuthCheckBox_Unchecked" Margin="0,10,0,0"/>
                        
                        <!-- Username and Password -->
                        <Grid Margin="0,10" x:Name="ProxyAuthGrid">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <Label Grid.Row="0" Grid.Column="0" Content="Username:" VerticalAlignment="Center"/>
                            <TextBox x:Name="ProxyUsernameTextBox" Grid.Row="0" Grid.Column="1" MinWidth="200"/>
                            
                            <Label Grid.Row="1" Grid.Column="0" Content="Password:" VerticalAlignment="Center"/>
                            <PasswordBox x:Name="ProxyPasswordBox" Grid.Row="1" Grid.Column="1" MinWidth="200"/>
                        </Grid>

                        <!-- Bypass List -->
                        <Label Content="Bypass list (comma-separated):" Margin="0,10,0,0"/>
                        <TextBox x:Name="ProxyBypassTextBox" 
                                 TextWrapping="Wrap" 
                                 AcceptsReturn="True" 
                                 VerticalScrollBarVisibility="Auto"
                                 Height="60"
                                 ToolTip="Enter addresses that should bypass the proxy, separated by commas (e.g., localhost,127.0.0.1,*.example.com)"/>
                        
                    </StackPanel>
                </GroupBox>

                <!-- Test Connection -->
                <StackPanel Orientation="Horizontal" Margin="0,10">
                    <Button x:Name="TestConnectionButton" Content="Test Connection" Click="TestConnectionButton_Click" Width="120"/>
                    <Label x:Name="TestStatusLabel" Content="" Margin="10,0,0,0"/>
                </StackPanel>

            </StackPanel>
        </ScrollViewer>

        <!-- Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
            <Button x:Name="SaveButton" Content="Save" Click="SaveButton_Click" Width="100"/>
            <Button x:Name="CancelButton" Content="Cancel" Click="CancelButton_Click" Width="100"/>
        </StackPanel>
        
    </Grid>
</Window>